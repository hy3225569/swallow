<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sea.swallow.dal.StateMapper">
      <select id="selectStateList" parameterType="map" resultType="com.sea.swallow.model.StateModel">
	select a.content,date_format(a.release_time,'%Y-%m-%d %H:%i:%s') releaseTime,a.state_id
	stateId,b.user_id userId from tb_state a INNER JOIN tb_activity b ON b.action_id=a.state_id
	<where>
		1=1
		<if test="userId!=null">
			and b.user_id=#{userId}
		</if>
	</where>
      </select> 
       <insert id="insertState" parameterType="com.sea.swallow.model.StateModel">
         INSERT  into tb_state (state_id,content,release_time) VALUES (#{stateId},#{content},now())
       </insert>
</mapper>